# JS基础
## 语法
- 区分大小写
- 标识符第一个字母必须是字母、`_`或`$`
- 其他字符可以是字母、`_`、`$`或数字（字母可以使Unique中的字母！）
- 注释，与C相同
- 添加`"use strict"`开启严格模式
- 可以省略分号，若省略则由解析器确定语句的结尾
- 条件控制语句在只有一行时可以省略大括号

### 关键字和保留字
## 数据类型
js 可以分为两种类型的值，一种是基本数据类型，一种是复杂数据类型。
### 基本数据类型
js 一共有五种基本数据类型，分别是 **Undefined**、**Null**、**Boolean**、**Number**、**String**，
还有在 ES6 中新增的 **Symbol** 和 ES10 中新增的 **BigInt** 类型。

我们可以使用`typeof`关键字判断变量的类型，不过需要注意*typeof null == "object"*

#### undefined

undefined只有一个值

变量声明但未赋值，则是undefined

声明但未赋值的变量与未声明的变量不同。调用未声明的变量会发生错误。

但是typeof未声明的变量返回undefined

```js
var a;
consle.log(typeof a == typeof b)//true
```

#### null

null也只有一个值

null表示一个空对象指针

undefined的派生自null，因此undefined==null

⚠：`type of null = object`


#### boolean类型

Boolean类型的字面量有两个:ture和false,这两个值是区分大小写的

所有的数据类型都有雨boolean类型转换的方法

| 数据类型      | true | false     |
|-----------|------|-----------|
| String    | 非空串  | ""        |
| Number    | 非0数字 | 0 与 NaN   |
| Object    | 任何对象 | null      |
| undefined |      | undefined |
| Boolean   | true | false     |

#### number类型

最基本的数值字面量是十进制数

如果要表达八进制则如下:

```js
let octalNum1=070 //56
let octalNum2=079 //无效,解析为79
```

八进制字面量在严格模式下无效并且会抛出错误

16进制数字字面量的前两位必须为`0x`

##### 浮点数

数值中包含一个小数点并且小数点后至少有一位数字的数叫做浮点数

存储浮点数更消耗空间,因此js引擎会尽量把浮点数转化为整数(即一个浮点数如果可以转化为整数,如1.0,就会被转化为整数)

对于极大极小的数字,我们会用科学计数法表示,即,使用浮点数表示科学计数法

浮点数的加减法是不准确的,比如0.1+0.2=0.3000000000000000004

```js
//todo:这个我们有空再说
```

##### 数值范围

ECMAScript中的最小数值为Number.MIN_VALUE,最大值为Number.MAX_VALUE

##### NaN

Not a Number (NaN),是一个特殊的数值,这个数值用来表示一个本来应该返回数值的操作未返回数值的情况

比如:任何数字/0=NaN

以及,任何涉及NaN的操作都会返回NaN,一个更易花的特性是`NaN!=NaN`,如果我们想知道一个值是不是NaN,则需要使用`isNaN()`这个函数。
这个函数接受一个参数之后会尝试吧参数转化为数字,如果转化成果则返回false,如果转化不成功或者是NaN则返回true

##### 数值转化

有3个函数可以非数值转化为数值:Number() parseInt() parseFloat()

Number的转化规则如下:

- 如果是Boolean值,false为0,true为1
- 如果是数值,不变
- 如果是undefined,返回NaN
- 如果是字符串
    - 如果只包含数字:前导0会被消除,正常转化为数字
    - 如果包含浮点个事,则转化为浮点数,同样消除前导0
    - 如果含有16进制数字,则将其转化为相同大小的十进制数值
    - 如果字符串为空,则转化为0
    - 其他情况为NaN
- 如果是对象,先调用ValueOf()方法,在按照前面的规则转化

parseInt与Number稍有不同:

- 转化字符串时从第一个不为空的位开始,也就是说""会被转化为NaN
- 转化字符串会到第一个非数字字符截止,也就是说如果一个字符串前面是数字,后面是字母,则会返回前面的那个数字
- 如果以0开头,可以正确识别八进制数与16进制数,并转化为十进制(es5之后遇到0就会停止,认为值为0,为了消除这个问题可以在第一个参数传入一个数字作为基数,如果传入8就代表八进制)

parseFloat与parseInt更为相似,但仍有不同:

- 转化字符串时,第一次遇到`.`不会停止而是将其转化为浮点数
- 始终会在遇到前导0的时候停止,即只能转化十进制数。如果有前导0,则直接转化为0

#### string 类型

string类型用来表示由0或多个16位Unicode字符组成的字符序列

在ES中使用双引号表示的字符串与使用单引号表示的字符串完全相同

##### 字符字面量

String类型包含一些特殊的字面量称为转义序列

| 字面量    | 含义                       |
|--------|--------------------------|
| \n     | 换行                       |
| \t     | 制表                       |
| \b     | 空格                       |
| \r     | 回车                       |
| \f     | 进纸                       |
| \\\    | 斜杠                       |
| \'     | 单引号                      |
| \"     | 双引号                      |
| \xnn   | 以16进制代码nn表示一个字符          |
| \unnnn | 以16进制代码nnnn表示一个Unicode字符 |

任何字符串的长度可以通过其length属性获取

```js
let str = "test\u03a3"
console.log(str)    //>>5
```

如果字符中包含双字节字符，则length属性可能不会准确的返回字符串中的字符数目

##### 特点

- 字符串是不可变的

##### 转化字符串

1. 使用几乎每个值都有的`toString()`方法（null和undefined没有这个属性）
   在调用这个方法时可以传递一个参数，表示数字转化为字符串时的基数（进制）

2. 可以使用`String()`方法，转化规则如下：

    1. 如果有`toString()`方法，则调用该方法（无参）

    2. 如果是null则返回“null”

    3. 如果是undefined则返回“undefined”

### 引用数据类型
引用数据类型指的是 Object 类型，所有其他的如 Array、Date 等数据类型都可以理解为 Object 类型的子类

ES提供了`instanceof`操作符来确定引用类型变量的类型。

规定所有的引用类型的值都是Object的实例

### 存储位置的区别
基本数据类型的值直接保存在栈中，而复杂数据类型的值保存在堆中，通过使用在栈中保存对应的指针来获取堆中的值。

在操作系统中，内存被分为栈区和堆区：
- 栈区内存由编译器自动分配释放，存放函数的参数值，局部变量的值等。其操作方式类似于数据结构中的栈。 
- 堆区内存一般由程序员分配释放，若程序员不释放，程序结束时可能由垃圾回收机制回收。

## 保留字
### ES6 中的关键字

break、case、catch、class、const、continue、debugger、default (en-US)、delete 、do 、else
export、extends、finally、for、function、if、import、in、instanceof、new、return、super
switch、this、throw、try、typeof、var、void、while、with、yield

### 未来保留关键字
在 ECMAScript 规格中，这些关键字被当成关键字保留。目前它们没有特殊功能，但是在未来某个时间可能会加上。
所以这些关键字不能当成标识符使用。这些关键字在严格模式和非严格模式中均不能使用。

enum

### 严格模式中的保留关键字

implements、interface、let、package、private、protected、public、static

### 模块代码中的保留关键字

await

### 之前标准中的保留关键字
abstract、boolean、byte、char、double、final、float、goto、int、long、native、short
synchronized、transient、volatile

另外，字面量 null、true和false同样不能被当成标识使用。

## 操作符
### 一元操作符

#### 递增与递减

`++`与`--`，与c++一样，将变量+1，前置与后置有优先级的区别

不过在应用与不同的值时，其操作遵循下列规则：
- 在应用于一个包含有效数字的字符串时，先将变量抓换位数字再操作
- 在应用于一个不包含有效数字的字符串时，将变量设置为NaN，字符串变为数字
- 布尔值，false转化为0，true转化为1
- 应用于浮点数时，正常加减1
- 应用于对象是，先调用对象的valueof()方法，取得一个可供操作的值再对应以上规则

#### 一元加减

对数字来说，跟数学课本上教的一样

在对非字符，先进行类似`Number()`的转换

### 位操作符

ES中所有的数值都已IEEE-754 64位格式存储，但进行位操作时会先将64位值转换成32位的整数，然后再执行操作，最后再将结果转换会64位

因为这种转换过程，对NaN和Infinity进行为操作时，这两个值都会被当成0处理。

对非数组进行位操作时，会先使用Number转换为一个数值，再应用位操作。

#### 按位非

执行按位非的结果是数值的反码

其本质即**操作数的负值-1**

#### 按位与

同1则1

#### 按位或

有1则1

#### 按位异或

非同则1

#### 左移

向左移动n位

#### 右移

符号位之外的值，向右移动n位

#### 无符号右移

向右移动n位（包括符号位）

### 布尔操作符

#### 逻辑非

逻辑非，`!`，转化为布尔值为true的值为false

#### 逻辑与

两个值都为true则返回true，否则为false

对于非boolean的值：

- 如果第一个操作数为Boolean值true，则返回第二个操作数
- 如果两个字面量转化为都为true，则返回第二个操作数
- 如果有null，则返回null
- 如果有undefined，则返回undefined
- 如果有NaN，则返回NaN

逻辑与属于短路运算符，如果第一个为false，则不会判断第二个值

#### 逻辑或

两个值都为false，则返回false，否则为true

对于非boolean的值：

- 如果第一个操作数为计算为true，则返回第一个操作数
- 如果第一个操作数计算为false，则返回第二个操作数
- 如果都是null，则返回null
- 如果都是undefined，则返回undefined
- 如果都是NaN，则返回NaN

我们可以使用逻辑或的行为来避免为变量赋null或undefined

```js
let myObject = perferredValue||backupValue;
```

### 乘性操作符

#### 乘法

在处理特殊值时，乘法遵循的规则如下：

- 都为数值，则正常相乘，如果乘积超过了表示范围，则为`Infinity`或 `-Infinity`
- 有一个为NaN，则为NaN
- `Infinity `乘 0 = NaN
- `Infinity` 乘 非0的数为Infinity或 -Infinity
- `Infinity`相乘，结果为Infinity

- 有一个操作符不为数值则调用`Number()`转化为数值再使用上述方法

#### 除法

在处理特殊值时，除法遵循的规则如下：

- 都为数值，则正常相除，如果商超过了表示范围，则为`Infinity`或 `-Infinity`
- 有一个为NaN，则为NaN
- `Infinity` 除 `Infinity` = NaN
- 非0的数被0除为`Infinity`或 -Infinity
- 0相除，结果为`Infinity`
- `Infinity`除任意非0有限数值，结果为Infinity
- 有一个操作符不为数值则调用`Number()`转化为数值再使用上述方法

#### 取余

在处理特殊值时，取余的返回值遵循的规则如下：
- 都为数值，则正常取余
- 有一个为NaN，则为NaN
- `Infinity` 除 有限的数 = NaN
- 非0的数被0除，返回NaN
- Infinity相除，返回NaN
- 任意非0有限数值除`Infinity`，结果为被除数
- 被除数为0，则返回0
- 有一个操作符不为数值则调用`Number()`转化为数值再使用上述方法

### 加性操作符

#### 加法

加法的操作比较复杂，*如果两个操作符都是数值，则应用以下规则：*
- 如果有一个操作符为NaN，结果为NaN
- Infinity + Infinity = Infinity
- -Infinity + -Infinity = -infinity
- Infinity + -Infinity = NaN
- +0 + +0 = +0
- -0 + -0 = -0
- +0 + -0 = +0

*如果有一个操作符为字符串，则应用以下规则*：
- 如果两个都是字符串，则将两个操作数拼接起来
- 如果只有一个操作数是字符串，则将另一个转化为字符串再拼接起来

#### 减法
- 如果有一个操作符为NaN，结果为NaN
- Infinity - Infinity = NaN
- -Infinity - -Infinity = NaN
- Infinity - -Infinity = Infinity
- -Infinity - Infinity = -Infinity
- +0 - +0 = +0
- -0 - -0 = +0
- +0 -  -0 = -0
- 如果有一个值为其他基本类型，则先隐式调用`Number()`转化为数字则计算
- 如果有对象，则先调用ValueOf转化为基本类型再采用上述的规则计算

### 关系操作符

关系操作符有`>`、`<`、`>=`、`<=`几种，其含义小学都学过吧

关系操作符的计算规则为：
- 如果两个值都为数值，则执行数值比较
- 如果两个值都为字符串，则比较其字符编码
- 如果有一个为数值，则将另一个也转化为数值
- 如果有一个为对象，则将调用`valueOf`或者`toString`方法将其转化为基本数据类型再进行比较
- 如果一个操作数为布尔值，则先将其转化为数值再执行比较。
- **任何操作数与NaN比较都为false**

### 相等运算符

在ES中，用`==`表示相等，用`!=`表示不相等。这两个值会先进行类型转换再进行比较。

其规则如下：
- 如果有一个操作符为布尔类型，则先将其转化为数字再进行比较
- 如果一个操作符为字符串，另一个为数值，则需要将字符串转化为数值
- 如果一个操作符为对象，则先调用对象的ValueOf方法将其转化为基本数据类型再比较
- null和undefined相等
- 不转换null与undefined
- 如果有NaN，则不相等（即使两个都是NaN）
- 如果两个都是对象，则比较两个变量是否指向同一块内存

同时，还有`===`表示全等，`!==`表示不全等

这两个操作符的比较规则与相等和不相等相同，不过在比较之前不进行类型转换

### 条件运算符

语法为`条件?条件为真时的返回值:条件为假的时候的返回值`

### 赋值运算符

简单的赋值运算符用`=`表示，作用是把右边的值赋给左边

每个主要的算术运算符都有对应的复合赋值运算符

### 逗号运算符

使用逗号运算符可以在一条语句中执行多个操作。

当用逗号运算符进行赋值时，逗号操作符总是会返回表达式的最后一项

### 运算符优先级从高到低排序

| 运算符                                | 描述                         |
|------------------------------------|----------------------------|
| . [] ()                            | 字段访问、数组下标、函数调用以及表达式分组      |
| ++ -- - ~ ! delete new typeof void | 一元运算符、返回数据类型、对象创建、未定义值     |
| * / %                              | 乘法、除法、取模                   |
| + - +                              | 加法、减法、字符串连接                |
| << >> >>>                          | 移位                         |
| < <= > >= instanceof               | 小于、小于等于、大于、大于等于、instanceof |
| == != === !==                      | 等于、不等于、严格相等、非严格相等          |
| &                                  | 按位与                        |
| ^                                  | 按位异或                       |
| &#124;                             | 按位或                        |
| &&                                 | 逻辑与                        |
| &#124;&#124;                       | 逻辑或                        |
| ?:                                 | 条件                         |
| = oP=                              | 赋值、运算赋值                    |
| ,                                  | 多重求值                       |

## 语句

### if语句

语法为:

```js
if(condition)
    statement
else
    statement2
```

### do-while语句

do-while是一个后测试循环语句,语法为:

```js
do{
    statement
}while(condition)
```

### while语句

while属于前测试循环语句

### for语句

for也是一种前测试循环语句

### for-in 语句

for-in 是一种精准的迭代语句,可以用来枚举对象的属性

### label 语句

label可以在代码中添加标签,以便将来使用,起语法为:

```js
label:statement
```

### break和continue

break和continue用来在循环中精准的控制代码的执行

break和continue都可以与label语句联合使用,从而返回代码中特定的位置.这红联合使用的情况多发生在
循环嵌套的情况下。

如果过度使用则会给调试带来麻烦

### with语句

with语句的作用是将代码的作用域设置到一个特定的对象中。
语法为：

```js
with (obj){
    statement;
}
```

使用with语句主要是为了简化多次编写同一个对象的工作，在with语句的代码块内部，每个变量首先
被认为是一个局部变量。

（大量使用with语句会导致性能下降，同时也会给调试带来困难，因此不建议使用）

### switch语句

switch语句与if语句类似，也是一种普遍使用的流控制语句。
语法为：

```js
switch (expression){
    case value:
        statement;
        break;
    case value2:
        statement2;
        break;
    default:
        statement3;
}
```

switch语句中的每一个case的含义为：如果表达式等于value，则执行后面的语句。
而break关键字会使代码执行流跳出switch语句，如果不使用break，则会执行之后的所有case

ES的switch语句的独特之处是：**switch语句中可以使用任何数据类型**，并且**每个case的值不一定
是常量，甚至可以是变量，甚至是表达式**