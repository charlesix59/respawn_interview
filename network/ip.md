# ip协议簇

ip是一种虚拟地址，在物理层传播时并不是直接用ip标识下一跳而是通过mac地址确定下一跳的地址。

通常ipv4使用点分十进制表示，即地址用十进制表示，每8个二进制位转化成的十进制数字之间加一个点

## Ip地址分类
ip地址的分类是指将地址分为若干个固定类，每一类地址都由两个固定长度的字段组成。

ip地址的分类中，主机地址为全0与全1不能被使用

### A类
网络号：
- 第一个字节为1-126
- 可指派网络共126个
- IP网络号全0表示this，意思为本网络
- 网络号位127保留为换回测试用

主机号
- 每个网络有16777214个 2^24-2
- 全零表示this，本主机 
- 全1表示所有主机

共有2^31个地址，占整个地址的50%

### B类
网络号：
- 第一个字节为，128-191
- 可指派网络数为 16383个，即2^14-1

主机号：
- 128.0.0.0 无法指派
- 最小网络地址为128.1.0.0
- 每个网络的最大主机数为2*16-2

占整个网络地址的25%

### C类
网络号：
- 第一个字节192-223
- 可指派网络为16777216个

主机号：
- 192.0.0.0不指派
- 最小地址为192.0.1.0
- 每个C类地址可指派的主机位为2^8-2

整个C类地址占12.5%

### D类
多播地址，第一个字节为224-239
### E类
保留为今后使用，第一个字节为240-255

### 缺点
- 空间利用率有时很低
- 给每个物理网络分配一个网络号会使路由表变得太大而使网络性能变坏
- 两级IP地址不够灵活

## 划分子网
1. 一个拥有许多物理网络的单位，可以将所属的物理网络划分为若干个子网
2. 从网络号借用若干位作为子网号，两级IP地址在本单位内部就变为三级IP地址 
3. 凡是从其他网络发送给本单位的某台主机的IP数据报仍然是根据目的网络号找到连接在本单位网络的路由器，路由器在收到IP地址后再按照子网号找到目的子网

子网掩码： 
- 将三级IP的目的IP地址与子网掩码按位与就可以得到要找的子网网络地址 
- 所有的网络都必须使用子网掩码 
- 没有划分子网的网络子网掩码为默认子网掩码 
- 默认子网掩码的长度与网络号长度相同

缺点：减少了能够连接在网络上的主机总数

## ARP
ARP 协议解决了 IP 地址转 MAC 地址的一些问题